<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Jekyll v3.8.1">
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Laon Dreams • Simple, blog-aware, static sites" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="https://github.com/laondreams/laondreams/commits/master.atom">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Android 와 Annotation | Laon Dreams • Simple, blog-aware, static sites</title>
<meta name="generator" content="Jekyll v3.8.1" />
<meta property="og:title" content="Android 와 Annotation" />
<meta name="author" content="steve" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="source: https://tosslab.github.io" />
<meta property="og:description" content="source: https://tosslab.github.io" />
<link rel="canonical" href="http://localhost:4000/news/2015/03/01/02.android-%EC%99%80-annotation/" />
<meta property="og:url" content="http://localhost:4000/news/2015/03/01/02.android-%EC%99%80-annotation/" />
<meta property="og:site_name" content="Laon Dreams • Simple, blog-aware, static sites" />
<meta property="og:image" content="http://localhost:4000/img/twitter-card.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-03-01T00:00:00+09:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@laondreams" />
<meta name="twitter:creator" content="@steve" />
<script type="application/ld+json">
{"url":"http://localhost:4000/news/2015/03/01/02.android-%EC%99%80-annotation/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/img/LaonDreams.png"},"name":"steve"},"author":{"@type":"Person","name":"steve"},"description":"source: https://tosslab.github.io","headline":"Android 와 Annotation","dateModified":"2015-03-01T00:00:00+09:00","datePublished":"2015-03-01T00:00:00+09:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/news/2015/03/01/02.android-%EC%99%80-annotation/"},"image":"http://localhost:4000/img/twitter-card.png","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-8484034453879329",
          enable_page_level_ads: true
      });
  </script>
</head>


<body class="wrap">
  <header>
  <div class="flexbox">
    <div class="center-on-mobiles">
      <h1>
        <a href="/" class="logo">
          <span class="sr-only">Jekyll</span>
          <img src="/img/LaonDreams.png" width="140" alt="LaonDreams Logo">
        </a>
      </h1>
    </div>
    <nav class="main-nav hide-on-mobiles">
      <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/docs/home/">Docs</a>
  </li>
  <li class="current">
    <a href="/news/">Posts</a>
  </li>
</ul>

    </nav>
    <div class="meta hide-on-mobiles">
    </div>
    <div class="meta hide-on-mobiles">
    </div>
    <div class="meta hide-on-mobiles">
    </div>
    <div class="meta hide-on-mobiles">
    </div>
  </div>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/docs/home/">Docs</a>
  </li>
  <li class="current">
    <a href="/news/">Posts</a>
  </li>
</ul>

  </nav>
</header>


    <section class="news">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the blog…</option>
    <option value="/news/">Home</option>
    <optgroup label="v1.x">
      
      <option value="/news/2018/05/13/android-01/">Kotlin Programming Language</option>
      
      <option value="/news/2016/12/03/gradle-tip/">Android Gradle Tips</option>
      
      <option value="/news/2016/07/26/android-database-tip/">Android 의 Sqlite Tip</option>
      
      <option value="/news/2016/04/16/migration-to-retrofit2/">Retrofit2 로 전환</option>
      
      <option value="/news/2016/02/12/Android-and-automation/">안드로이드와 자동화 툴</option>
      
      <option value="/news/2015/11/26/%EB%8D%94-%EB%B9%A0%EB%A5%B8-Andriod-App-Build/">더 빠른 Android App Build</option>
      
      <option value="/news/2015/03/10/.androidannotations-%EC%99%80-MVP/">AndroidAnnotations 와 MVP</option>
      
      <option value="/news/2015/03/01/04.androidannotation-%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8/">AndroidAnnotations 과 테스트</option>
      
      <option value="/news/2015/03/01/03.androidannotation-%EA%B3%BC-mvc/">AndroidAnnotations 과 MVC 패턴</option>
      
      <option value="/news/2015/03/01/02.android-%EC%99%80-annotation/">Android 와 Annotation</option>
      
      <option value="/news/2015/03/01/01.Android-mvc-mvvm-mvp/">Android 와 개발 패턴</option>
      
    </optgroup>
  </select>
</div>


      <div class="unit four-fifths">
        <article>
  <h2>
    Android 와 Annotation
    <a href="/news/2015/03/01/02.android-%EC%99%80-annotation/" class="header-link" title="Permalink">
      <span class="sr-only">Permalink</span>
      <i class="fa fa-link"></i>
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      android
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      01 Mar 2015
    </span>
    
    <a href="https://github.com/steve" class="post-author">
      <img class="avatar avatar-small" alt="steve" width="24" height="24" data-proofer-ignore="true" src="https://avatars3.githubusercontent.com/steve?v=3&amp;s=24" srcset="https://avatars3.githubusercontent.com/steve?v=3&amp;s=24 1x, https://avatars3.githubusercontent.com/steve?v=3&amp;s=48 2x, https://avatars3.githubusercontent.com/steve?v=3&amp;s=72 3x, https://avatars3.githubusercontent.com/steve?v=3&amp;s=96 4x">
      steve
    </a>
  </div>
  <div class="post-content">
    <p><img src="/img/GitHub-Mark-Light-24px.png" alt="Github"> source: <a href="https://tosslab.github.io/">https://tosslab.github.io</a></p>

<p>이 포스팅은 총 4부로 이어지며 현재는 2부입니다.</p>

<ol>
  <li><a href="/news/2015/03/01/01.Android-mvc-mvvm-mvp">1부 : Android, MVC, MVVM, MVP</a></li>
  <li><a href="/news/2015/03/01/02.android-%EC%99%80-annotation">2부 : Android 와 Annotation</a></li>
  <li><a href="/news/2015/03/01/03.androidannotation-%EA%B3%BC-mvc">3부 : AndroidAnnotations 과 MVC</a></li>
  <li><a href="/news/2015/03/01/04.androidannotation-%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8">4부 : AndroidAnnotations 과 테스트</a></li>
</ol>

<h3 id="annotation-이란">Annotation 이란?</h3>

<blockquote>
  <p>사전적 의미 : 주석</p>
</blockquote>

<ul>
  <li>특정 클래스, 변수,메소드 등에 붙이는 코드로 해당 타겟의 기능을 좀 더 명확하게 해주는 역할을 합니다. Web Spring 프레임워크 등에서는 타겟의 기능을 정의하여 특정 역할을 수행할 수 있도록 사용되고 있습니다.</li>
</ul>

<p>Java 에서 Annotation 이 동작하는 방식은 크게 2가지 입니다.</p>

<ol>
  <li>java.lang.reflection 을 이용해서 Class 정보를 읽어 Instance 의 타겟에 Annotation 에 해당되는 기능을 정의하는 방식</li>
  <li>Annotation Processing Tool(APT) 을 이용하여 Compile 단계에서 Annotation 이 정의된 타겟의 정보를 미리 정의하는 방식</li>
</ol>

<p>위의 2가지 방식 중에서는 2의 방식이 성능면에서 좋은 방식입니다. 하지만 APT 에 의한 방식은 Compile 된 클래스가 A.class -&gt; A_.class 라는 식으로 “_” 가 붙는 단점이 있습니다.</p>

<h3 id="java-annotation-접근">Java Annotation 접근</h3>

<ul>
  <li>java.lang.reflection 을 이용한 동작</li>
</ul>

<p>다음 코드는 java.lang.reflection 을 통해서 특정 타겟에 접근하여 객체에 Annotation 에 맞게 정의하는 방식입니다.
(View 의 DI 를 위한 동작입니다.)</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Target</span><span class="o">(</span><span class="n">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="n">ResourceView</span> <span class="o">{</span>

    <span class="kt">int</span> <span class="nf">id</span><span class="o">()</span> <span class="k">default</span> <span class="mi">0</span><span class="o">;</span>

<span class="o">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">InjectController</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">injectLayout</span><span class="o">(</span><span class="n">Activity</span> <span class="n">mActivity</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">Annotation</span><span class="o">[]</span> <span class="n">annotations</span><span class="o">;</span>
        <span class="n">AbstractInjectCommand</span> <span class="n">command</span><span class="o">;</span>

        <span class="n">ResourceLayout</span> <span class="n">mLayoutAnnotation</span> <span class="o">=</span> <span class="n">mActivity</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getAnnotation</span><span class="o">(</span><span class="n">ResourceLayout</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">InjectFactory</span><span class="o">.</span><span class="na">createInjectCommand</span><span class="o">(</span><span class="n">mActivity</span><span class="o">,</span> <span class="n">mLayoutAnnotation</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">command</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">command</span><span class="o">.</span><span class="na">excute</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// 어노테이션이 선언된 타겟에 접근하기 위해 클래스 변수에 접근</span>
        <span class="n">Field</span><span class="o">[]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">mActivity</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredFields</span><span class="o">();</span>

        <span class="kt">int</span> <span class="n">fieldSize</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">annoSize</span><span class="o">;</span>
        <span class="n">Field</span> <span class="n">field</span><span class="o">;</span>


        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">fieldIdx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">fieldIdx</span> <span class="o">&lt;</span> <span class="n">fieldSize</span><span class="o">;</span> <span class="o">++</span><span class="n">fieldIdx</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">fields</span><span class="o">[</span><span class="n">fieldIdx</span><span class="o">];</span>

            <span class="c1">// private 변수에 접근하기 위함</span>
            <span class="n">field</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 어노테이션 접근</span>
            <span class="n">annotations</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="na">getDeclaredAnnotations</span><span class="o">();</span>

            <span class="n">annoSize</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>

            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">annoIdx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">annoIdx</span> <span class="o">&lt;</span> <span class="n">annoSize</span><span class="o">;</span> <span class="o">++</span><span class="n">annoIdx</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// 어노테이션별 동작 수행</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">InjectFactory</span><span class="o">.</span><span class="na">createInjectCommand</span><span class="o">(</span><span class="n">mActivity</span><span class="o">,</span> <span class="n">annotations</span><span class="o">[</span><span class="n">annoIdx</span><span class="o">]);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">command</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">command</span><span class="o">.</span><span class="na">excute</span><span class="o">(</span><span class="n">field</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Annotation 이 정의된 타겟을 Java Reflection 을 이용해서 접근한 뒤 Annotation 정보를 추출 후 Annotation 에 맞게 동작을 합니다.
위의 소스는 View 를 Binding 하는 과정 중 일부입니다.</p>

<p><br></p>

<ul>
  <li>Annotation Processing Tool(APT) 에 의한 동작</li>
</ul>

<p>이와 다르게 APT 를 이용한 방식은 Compile 단계에서 미리 Annotation 이 정의 되기 때문에
Compile 되는 순서를 도식화 하였습니다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/assets/media/post_images/java-apt.jpg" alt="Summary Image"></td>
    </tr>
    <tr>
      <td style="text-align: center"><a href="http://www.informit.com/articles/article.aspx?p=2027052&amp;seqNum=6">http://www.informit.com/articles/article.aspx?p=2027052&amp;seqNum=6</a></td>
    </tr>
  </tbody>
</table>

<p>APT 는 컴파일 시점에 Java 코드 내의 Annotation 을 감지해서 Annotation 이 설정되어 있는 코드들은 새로운 Java 코드를 생성한 뒤 컴파일하도록 합니다.</p>

<p>Compile 단계가 더 추가되었지만 Runtime 시에는 성능상으로 영향이 거의 없다는 장점이 있습니다.</p>

<p><br></p>

<ul>
  <li>java.lang.reflection? Annotation Processing Tool?</li>
</ul>

<p>Replection 을 활용한 방법은 APT 에 대한 학습에 비하면 다소 쉬운면이 있습니다. 하지만 Runtime 시에 annotation 분석을 하기 때문에 성능상 이슈가 있습니다. 반면 APT 를 활용한 방식은 컴파일시 시간적인 비용과 APT 를 통해 생성된 코드는 A.java -&gt; A_.java 와 같은 형태로 변한다는 단점이 있으나 Runtime 시 성능상 이점이 있습니다.</p>

<h3 id="android-와-annotation">Android 와 Annotation</h3>

<p>안드로이드에서는 기본적으로 Java 1.6 에서 사용되는 Annotation 들을 지원합니다.
대표적으로 <a href="https://github.com/Override" class="user-mention">@Override</a> 입니다.</p>

<p>그외 에도 안드로이드 특성에 맞게 android.annotation 이 있으며
android.support.annotation 을 사용하면 Compile 시의 타겟에 대한 Validation을 미리 설정할수 있도록 도와줍니다.</p>

<p>그외에도 AndroidAnnotations, ButterKnife, Dagger 등이 APT 를 이용하여 안드로이드를 지원하고 있으며 안드로이드용 ORM 라이브러리는 java.lang.reflection 을 이용하여 동작합니다.</p>

<h3 id="참고-블로그">참고 블로그</h3>

<p><a href="http://www.informit.com/articles/article.aspx?p=2027052&amp;seqNum=6">Scripting, Compiling, and Annotation Processing in Java By Cay S. Horstmann and Gary Cornell (http://www.informit.com/articles/article.aspx?p=2027052&amp;seqNum=6)</a></p>

  </div>
</article>

      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    <ul>
      <li class="">
        <a href="/news/">All Post</a>
      </li>
      <li class="">
        <a href="/news/releases/">Kotlin Releases</a>
      </li>
    </ul>
    <h4>Recent Releases</h4>
    <ul>
      
    </ul>
    <h4>Other Posts</h4>
    <ul>
        
        
        <li class="">
          <a href="/news/2018/05/13/android-01/">Kotlin Programming Language</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2016/12/03/gradle-tip/">Android Gradle Tips</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2016/07/26/android-database-tip/">Android 의 Sqlite Tip</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2016/04/16/migration-to-retrofit2/">Retrofit2 로 전환</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2016/02/12/Android-and-automation/">안드로이드와 자동화 툴</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2015/11/26/%EB%8D%94-%EB%B9%A0%EB%A5%B8-Andriod-App-Build/">더 빠른 Android App Build</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2015/03/10/.androidannotations-%EC%99%80-MVP/">AndroidAnnotations 와 MVP</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2015/03/01/04.androidannotation-%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8/">AndroidAnnotations 과 테스트</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2015/03/01/03.androidannotation-%EA%B3%BC-mvc/">AndroidAnnotations 과 MVC 패턴</a>
        </li>
        
        
        
        <li class="current">
          <a href="/news/2015/03/01/02.android-%EC%99%80-annotation/">Android 와 Annotation</a>
        </li>
        
        
        
        <li class="">
          <a href="/news/2015/03/01/01.Android-mvc-mvvm-mvp/">Android 와 개발 패턴</a>
        </li>
        
        
    </ul>
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer>
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>
        © 2018 Laon Dreams
      <br>Contacts: <a href="mailto:laondreams@gmail.com">laondreams@gmail.com</a></p>
    </div>
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>
        Proudly hosted by
        <a href="https://github.com">
          <img src="/img/footer-logo.png" width="100" height="30" alt="GitHub • Social coding">
        </a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  
  <!-- Google Analytics (https://www.google.com/analytics) -->
  <script>
    !function(j,e,k,y,l,L){j.GoogleAnalyticsObject=y,j[y]||(j[y]=function(){
    (j[y].q=j[y].q||[]).push(arguments)}),j[y].l=+new Date,l=e.createElement(k),
    L=e.getElementsByTagName(k)[0],l.src='https://www.google-analytics.com/analytics.js',
    L.parentNode.insertBefore(l,L)}(window,document,'script','ga');

    ga('create', 'UA-119113988-1', 'auto');
    ga('send', 'pageview');

  </script>


  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: '50fe39c839958dfad797000f33e2ec17',
indexName: 'jekyllrb',
inputSelector: '#docsearch-input',
enhancedSearchInput: true,
debug: false // Set debug to true if you want to inspect the dropdown
});
</script>

</body>
</html>
